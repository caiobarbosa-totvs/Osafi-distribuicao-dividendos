<!DOCTYPE html>
<html>
<head>
    <title>Distribuição de Dividendos</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Imports Obrigatórios Fluig Style Guide -->
    <link rel="stylesheet" type="text/css" href="/style-guide/css/fluig-style-guide-flat.min.css">
    <script src="/portal/resources/js/jquery/jquery.js"></script>
    <script src="/portal/resources/js/jquery/jquery-ui.min.js"></script>
    <script src="/portal/resources/js/mustache/mustache-min.js"></script>
    <script src="/style-guide/js/fluig-style-guide.min.js"></script>
    
    <!-- Arquivos Customizados (Criaremos nas próximas etapas) -->
    <link rel="stylesheet" type="text/css" href="custom.css">
</head>
<body>
    <!-- Todo o formulário deve estar dentro desta div -->
    <div class="fluig-style-guide">
        <form name="form" role="form">
            
            <div class="container-fluid">
                <h2 class="page-header">Distribuição de Dividendos</h2>
                
                <!-- ======================================================= -->
                <!-- PAINEL 1: PLANEJAMENTO FINANCEIRO - DADOS TRIBUTÁRIOS   -->
                <!-- ======================================================= -->
                <div class="panel panel-primary" id="panelPlanejamento">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <i class="flaticon flaticon-calculator icon-sm"></i> 
                            1. Planejamento Financeiro - Dados Tributários e Origem
                        </h3>
                    </div>
                    <div class="panel-body">
                        
                        <!-- Linha 1: Ano e Regime -->
                        <div class="row">
                            <div class="form-group col-md-3">
                                <label for="anoReferencia">Ano de Referência</label>
                                <input type="number" class="form-control" name="anoReferencia" id="anoReferencia" placeholder="Ex: 2025">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="regimeTributario">Regime Tributário</label>
                                <select class="form-control" name="regimeTributario" id="regimeTributario">
                                    <option value="">Selecione...</option>
                                    <option value="Lucro Presumido">Lucro Presumido</option>
                                    <option value="Lucro Real">Lucro Real</option>
                                    <option value="Simples Nacional">Simples Nacional</option>
                                </select>
                            </div>
                        </div>

                        <!-- Linha 2: Receita e Base -->
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label for="receitaBruta">Receita Bruta do Período (R$)</label>
                                <input type="text" class="form-control money" name="receitaBruta" id="receitaBruta" placeholder="0,00">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="basePresumida">Base de Cálculo Presumida (%)</label>
                                <input type="number" class="form-control" name="basePresumida" id="basePresumida" placeholder="Ex: 32">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="limiteIsento">Limite Isento Lei 9.249/95 (R$)</label>
                                <input type="text" class="form-control" name="limiteIsento" id="limiteIsento" readonly placeholder="Cálculo Automático">
                            </div>
                        </div>

                        <hr>

                        <!-- Linha 3: Origem do Lucro -->
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label>Origem do Lucro</label>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="origemLucro" id="origemCorrente" value="corrente">
                                        Lucro do Período Corrente (Antecipação)
                                    </label>
                                </div>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="origemLucro" id="origemAnterior" value="anterior">
                                        Lucro de Exercícios Anteriores (Distribuição Direta)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Linha 4: Valor Proposto e Centro de Custo -->
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label for="valorProposto">Valor Proposto para Distribuição (R$)</label>
                                <input type="text" class="form-control money" name="valorProposto" id="valorProposto" placeholder="0,00">
                                <!-- Elemento oculto para a mensagem de alerta -->
                                <span id="alertaLimite" class="text-danger" style="display:none;">
                                    <strong>⚠ Excede Limite Isento - Necessária Escrituração Contábil</strong>
                                </span>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="centroCusto">Centro de Custos</label>
                                <input type="text" class="form-control" name="centroCusto" id="centroCusto" placeholder="Digite ou selecione...">
                            </div>
                        </div>
                        
                    </div>
                </div> <!-- Fim Painel 1 -->
                <!-- ======================================================= -->
                <!-- PAINEL 2: TABELA DE DISTRIBUIÇÃO POR SÓCIO (GRID)       -->
                <!-- ======================================================= -->
                <div class="panel panel-default" id="panelSocios">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <i class="flaticon flaticon-users icon-sm"></i> 
                            2. Distribuição por Sócio
                        </h3>
                    </div>
                    <div class="panel-body">
                        
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" tablename="tabela_socios" id="tabela_socios" noaddbutton="true">
                                <thead>
                                    <tr>
                                        <th style="width: 25%">Nome / Razão Social do Sócio</th>
                                        <th style="width: 15%">CPF / CNPJ</th>
                                        <th style="width: 15%">Participação (%)</th>
                                        <th style="width: 20%">Valor a Receber (R$)</th>
                                        <th style="width: 25%">Dados Bancários</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <input type="text" class="form-control" name="nomeSocio" id="nomeSocio">
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name="cpfCnpjSocio" id="cpfCnpjSocio">
                                        </td>
                                        <td>
                                            <input type="number" class="form-control percent" name="percSocio" id="percSocio">
                                        </td>
                                        <td>
                                            <input type="text" class="form-control money" name="valorSocio" id="valorSocio">
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name="dadosBancariosSocio" id="dadosBancariosSocio" placeholder="Banco, Agência, Conta">
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Botão para adicionar nova linha nativo do Fluig Style Guide -->
                        <div class="row">
                            <div class="col-md-12">
                                <button type="button" class="btn btn-primary" onclick="wdkAddChild('tabela_socios')">
                                    <i class="flaticon flaticon-add-plus icon-sm"></i> Adicionar Sócio
                                </button>
                            </div>
                        </div>

                    </div>
                </div> <!-- Fim Painel 2 -->
                
                                <!-- ======================================================= -->
                <!-- PAINEL 3: APROVAÇÃO DA DIRETORIA                        -->
                <!-- ======================================================= -->
                <div class="panel panel-default" id="panelDiretoria">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <i class="flaticon flaticon-check-circle icon-sm"></i> 
                            3. Aprovação da Diretoria
                        </h3>
                    </div>
                    <div class="panel-body">
                        
                        <!-- Linha 1: Decisão e Motivo de Rejeição -->
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label>Decisão da Diretoria</label>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="decisaoDiretoria" id="dirAprovar" value="Aprovar">
                                        Aprovar Proposta
                                    </label>
                                </div>
                                <div class="radio">
                                    <label>
                                        <input type="radio" name="decisaoDiretoria" id="dirRejeitar" value="Rejeitar">
                                        Rejeitar Proposta
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Esta div será exibida via JavaScript apenas se a decisão for "Rejeitar" -->
                            <div class="form-group col-md-8" id="divMotivoRejeicao" style="display: none;">
                                <label for="motivoRejeicaoDir">Motivo da Rejeição (Obrigatório em caso de recusa)</label>
                                <select class="form-control" name="motivoRejeicaoDir" id="motivoRejeicaoDir">
                                    <option value="">Selecione o motivo...</option>
                                    <option value="Fluxo de caixa insuficiente">Fluxo de caixa insuficiente</option>
                                    <option value="Resultado não confirmado">Resultado não confirmado</option>
                                    <option value="Não alinhado com estratégia">Não alinhado com estratégia</option>
                                    <option value="Outro">Outro (Especificar nas observações)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Linha 2: Observações -->
                        <div class="row">
                            <div class="form-group col-md-12">
                                <label for="obsDiretoria">Observações da Diretoria</label>
                                <textarea class="form-control" name="obsDiretoria" id="obsDiretoria" rows="3" placeholder="Digite considerações adicionais..."></textarea>
                            </div>
                        </div>

                    </div>
                </div> <!-- Fim Painel 3 -->

                <!-- ======================================================= -->
                <!-- PAINEL 4: AVALIAÇÃO TÉCNICA - CONTROLADORIA             -->
                <!-- ======================================================= -->
                <div class="panel panel-default" id="panelControladoria">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <i class="flaticon flaticon-list icon-sm"></i> 
                            4. Avaliação Técnica - Controladoria
                        </h3>
                    </div>
                    <div class="panel-body">
                        
                        <!-- Linha 1: Checklist -->
                        <div class="row">
                            <div class="form-group col-md-12">
                                <label>Checklist Fiscal e Conformidade (Obrigatórios para aprovação)</label>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" name="checkRegime" id="checkRegime" value="sim">
                                        Regime confirmado e período tributário encerrado
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" name="checkDctf" id="checkDctf" value="sim">
                                        DCTF transmitida e quitada
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" name="checkLei9249" id="checkLei9249" value="sim">
                                        Conformidade com Lei 9.249/95 (Isenção IRRF / Conformidade)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <hr>

                        <!-- Linha 2: Decisão e Parecer -->
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label for="decisaoControladoria">Decisão da Controladoria</label>
                                <select class="form-control" name="decisaoControladoria" id="decisaoControladoria">
                                    <option value="">Selecione...</option>
                                    <option value="Aprovar">Aprovar (Cálculos corretos e conformes)</option>
                                    <option value="Aprovar com Ressalvas">Aprovar com Ressalvas</option>
                                    <option value="Rejeitar">Rejeitar (Retornar ou Cancelar)</option>
                                </select>
                            </div>
                            <div class="form-group col-md-8">
                                <label for="parecerControladoria">Parecer da Controladoria / Recomendações</label>
                                <textarea class="form-control" name="parecerControladoria" id="parecerControladoria" rows="3" placeholder="Digite o parecer técnico, recomendações ou ressalvas..."></textarea>
                            </div>
                        </div>

                    </div>
                </div> <!-- Fim Painel 4 -->
                
                <!-- ======================================================= -->
                <!-- PAINEL 5: SOLICITAÇÃO DE ATA (DISTRIBUIÇÃO REGULAR)     -->
                <!-- ======================================================= -->
                <!-- Nota: Este painel inicia oculto e será exibido via JS se a origem for "Lucro de Exercícios Anteriores" -->
                <div class="panel panel-default" id="panelAta" style="display: none;">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <i class="flaticon flaticon-document icon-sm"></i> 
                            5. Solicitação e Geração de Ata
                        </h3>
                    </div>
                    <div class="panel-body">
                        
                        <!-- Linha 1: Dados Gerais da Ata -->
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label for="dataAta">Data da Ata</label>
                                <input type="date" class="form-control" name="dataAta" id="dataAta">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="localAta">Local</label>
                                <input type="text" class="form-control" name="localAta" id="localAta" placeholder="Ex: Sede da Empresa">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="horarioAta">Horário</label>
                                <input type="time" class="form-control" name="horarioAta" id="horarioAta">
                            </div>
                        </div>

                        <!-- Linha 2: Dados do Exercício -->
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label for="periodoReferenciaAta">Período de Referência (De/Até)</label>
                                <input type="text" class="form-control" name="periodoReferenciaAta" id="periodoReferenciaAta" placeholder="Ex: 01/01/2024 a 31/12/2024">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="resultadoLiquido">Resultado Líquido do Exercício (R$)</label>
                                <input type="text" class="form-control money" name="resultadoLiquido" id="resultadoLiquido" placeholder="0,00">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="totalDisponivel">Total Disponível para Distribuição (R$)</label>
                                <input type="text" class="form-control money" name="totalDisponivel" id="totalDisponivel" placeholder="0,00">
                            </div>
                        </div>

                        <hr>

                        <!-- Linha 3: Assinantes e Justificativa -->
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label>Assinantes (Integração Qualysign)</label>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" name="assinaturaRepresentante" id="assinaturaRepresentante" value="sim">
                                        Representante Legal (Obrigatório)
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" name="assinaturaFinanceiro" id="assinaturaFinanceiro" value="sim">
                                        Gerente Financeiro (Opcional)
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-8">
                                <label for="justificativaAta">Justificativa da Distribuição e Impacto Financeiro</label>
                                <textarea class="form-control" name="justificativaAta" id="justificativaAta" rows="3" placeholder="Detalhes para constar no documento legal..."></textarea>
                            </div>
                        </div>

                    </div>
                </div> <!-- Fim Painel 5 -->


                <!-- ======================================================= -->
                <!-- PAINEL 6: EXECUÇÃO FINANCEIRA E PAGAMENTO (GRID)        -->
                <!-- ======================================================= -->
                <div class="panel panel-default" id="panelFinanceiro" style="display: none;">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <i class="flaticon flaticon-card icon-sm"></i> 
                            6. Execução Financeira e Pagamento
                        </h3>
                    </div>
                    <div class="panel-body">
                        
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" tablename="tabela_pagamentos" id="tabela_pagamentos" noaddbutton="true">
                                <thead>
                                    <tr>
                                        <th style="width: 25%">Sócio Favorecido</th>
                                        <th style="width: 20%">Data Programada</th>
                                        <th style="width: 20%">Status do Pagamento</th>
                                        <th style="width: 20%">Data Efetiva (Qive)</th>
                                        <th style="width: 15%">Protocolo Bancário</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <!-- Campo preenchido via JS espelhando o Painel 2 -->
                                            <input type="text" class="form-control" name="pagFavorecido" id="pagFavorecido" readonly>
                                        </td>
                                        <td>
                                            <input type="date" class="form-control" name="pagDataProgramada" id="pagDataProgramada">
                                        </td>
                                        <td>
                                            <select class="form-control" name="pagStatus" id="pagStatus">
                                                <option value="Pendente">Pendente</option>
                                                <option value="Autorizado">Autorizado</option>
                                                <option value="Liquidado">Liquidado</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="date" class="form-control" name="pagDataEfetiva" id="pagDataEfetiva">
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name="pagProtocolo" id="pagProtocolo" placeholder="Automático ou Manual">
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Botão de adicionar linha no Grid de Pagamentos -->
                        <div class="row">
                            <div class="col-md-12">
                                <button type="button" class="btn btn-primary" onclick="wdkAddChild('tabela_pagamentos')">
                                    <i class="flaticon flaticon-add-plus icon-sm"></i> Adicionar Programação
                                </button>
                            </div>
                        </div>

                    </div>
                </div> <!-- Fim Painel 6 -->
            </div> <!-- Fim container-fluid -->
        </form>
    </div> <!-- Fim fluig-style-guide -->

    <!-- Import do JS Customizado (Criaremos na etapa de validações) -->
    <!-- <script type="text/javascript" src="distribuicao_dividendos.js"></script> -->
</body>
</html>